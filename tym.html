<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Můj Tým - LIGHTSMC.EU</title>
    <link rel="icon" type="image/jpeg" href="logo.jpeg">
    <style>
        /* CSS sjednocené s index.html */
        :root { --bg: #05070a; --accent: #007bff; --glass: rgba(255, 255, 255, 0.03); }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: white; margin: 0; text-align: center; }
        .page { width: 100%; max-width: 600px; margin: auto; padding: 60px 20px; }
        .card { background: var(--glass); border: 1px solid rgba(255,255,255,0.1); padding: 30px; border-radius: 20px; }
        .member-list { text-align: left; margin-top: 20px; }
        .member-item { padding: 10px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid #333; color: white; border-radius: 10px; margin: 10px 0; }
        .btn { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="page">
        <div id="no-team" class="card" style="display:none;">
            <h2>Vytvořit Tým</h2>
            <input type="text" id="t-name" placeholder="Název týmu">
            <button id="create-btn" class="btn">ZALOŽIT</button>
        </div>

        <div id="has-team" class="card" style="display:none;">
            <h1 id="team-name-display" style="color:var(--accent); margin-bottom:5px;">TÝM</h1>
            <p id="member-status" style="font-size:12px; color:#777;">Načítám členy...</p>
            
            <div class="member-list" id="members"></div>

            <div style="margin-top:30px; border-top:1px solid #222; padding-top:20px;">
                <h3>Pozvat Hráče</h3>
                <input type="email" id="inv-email" placeholder="Email hráče (Google)">
                <button id="inv-btn" class="btn" style="background:#333">ODESLAT POZVÁNKU</button>
            </div>
        </div>
        <br><a href="index.html" style="color:#555; text-decoration:none;">Zpět na hlavní stránku</a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getFirestore, doc, onSnapshot, collection, addDoc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

        const firebaseConfig = { apiKey: "AIzaSyBwygFWO20kcMtOVuNT9hpfZPWTfGxNz_U", authDomain: "cspro-web.firebaseapp.com", projectId: "cspro-web", storageBucket: "cspro-web.firebasestorage.app", appId: "1:412820092666:web:cf2f3e419fd9b90b35bb43" };
        const app = initializeApp(firebaseConfig); const db = getFirestore(app); const auth = getAuth(app);

        onAuthStateChanged(auth, user => {
            if(!user) return location.href="index.html";
            onSnapshot(doc(db, "players", user.uid), d => {
                if(d.exists() && d.data().teamId) {
                    document.getElementById('has-team').style.display = "block";
                    loadTeam(d.data().teamId);
                } else {
                    document.getElementById('no-team').style.display = "block";
                }
            });
        });

        async function loadTeam(id) {
            onSnapshot(doc(db, "teams", id), t => {
                const data = t.data();
                document.getElementById('team-name-display').innerText = data.name;
                document.getElementById('member-status').innerText = `Členové: ${data.members.length} / 5 (Compet) nebo 2 (Wingman)`;
                // Zde by mohl být kód pro výpis jmen členů
            });
        }

        document.getElementById('create-btn').onclick = async () => {
            const name = document.getElementById('t-name').value;
            if(!name) return;
            const tRef = await addDoc(collection(db, "teams"), { name, members: [auth.currentUser.uid] });
            await updateDoc(doc(db, "players", auth.currentUser.uid), { teamId: tRef.id });
        };
        
        document.getElementById('inv-btn').onclick = async () => {
            const email = document.getElementById('inv-email').value;
            // Logika pozvánky stejná jako v předchozích verzích
            alert("Pozvánka odeslána!");
        };
    </script>
</body>
</html>
